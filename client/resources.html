<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Resources - MindEase</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://unpkg.com/lucide@latest"></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
  <style>
    body { font-family: 'Inter', sans-serif; }
    .calendar-day { cursor: pointer; }
  </style>
</head>
<body class="min-h-screen bg-gray-50">

  <!-- Header -->
  <header class="bg-indigo-700 shadow-md sticky top-0 z-10">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4 flex justify-between items-center">
      <div class="flex items-center space-x-4">
        <i data-lucide="heart-pulse" class="w-8 h-8 text-white"></i>
        <h1 class="text-2xl font-bold text-white tracking-tight">MindEase</h1>
      </div>
      <nav class="hidden md:flex space-x-4">
        <a href="index.html" class="px-3 py-2 text-sm font-medium rounded-lg text-indigo-200 hover:bg-indigo-600">Discussion</a>
        <div class="relative group">
          <button class="px-3 py-2 text-sm font-medium rounded-lg text-indigo-200 hover:bg-indigo-600">Department</button>
          <div class="absolute hidden group-hover:block bg-white shadow-lg rounded mt-1 w-40">
            <a href="department.html?dept=CSE" class="block px-4 py-2 hover:bg-gray-100">CSE</a>
            <a href="department.html?dept=ECE" class="block px-4 py-2 hover:bg-gray-100">ECE</a>
            <a href="department.html?dept=Mech" class="block px-4 py-2 hover:bg-gray-100">Mech</a>
            <a href="department.html?dept=Robotics" class="block px-4 py-2 hover:bg-gray-100">Robotics</a>
          </div>
        </div>
        <a href="chat.html" class="px-3 py-2 text-sm font-medium rounded-lg text-indigo-200 hover:bg-indigo-600">AI & Peer Chat</a>
        <a href="resources.html" class="px-3 py-2 text-sm font-medium rounded-lg bg-indigo-800 text-white">Resources</a>
        <a href="profile.html" class="px-3 py-2 text-sm font-medium rounded-lg text-indigo-200 hover:bg-indigo-600">Profile</a>
      </nav>
      <button id="logout-btn" class="px-4 py-2 bg-indigo-500 text-white font-semibold rounded-lg shadow-md hover:bg-indigo-600 transition duration-200">Logout</button>
    </div>
  </header>

  <!-- Main -->
  <main class="p-4 sm:p-6 lg:p-8 max-w-5xl mx-auto space-y-8">

    <!-- Step 1: Choose Your Calm -->
    <section class="bg-white p-6 rounded-lg shadow">
      <h2 class="text-xl font-bold mb-4 text-gray-800">Choose Your Calm</h2>
      <div class="grid grid-cols-2 sm:grid-cols-3 gap-4">
        <button class="calm-btn px-4 py-2 bg-indigo-100 text-indigo-700 rounded hover:bg-indigo-200" data-type="breathing">Breathing</button>
        <button class="calm-btn px-4 py-2 bg-indigo-100 text-indigo-700 rounded hover:bg-indigo-200" data-type="meditation">Meditation</button>
        <button class="calm-btn px-4 py-2 bg-indigo-100 text-indigo-700 rounded hover:bg-indigo-200" data-type="stretching">Stretching</button>
        <button class="calm-btn px-4 py-2 bg-indigo-100 text-indigo-700 rounded hover:bg-indigo-200" data-type="journaling">Journaling</button>
        <button class="calm-btn px-4 py-2 bg-indigo-100 text-indigo-700 rounded hover:bg-indigo-200" data-type="mindfulness">Mindfulness</button>
      </div>
      <p id="calm-output" class="mt-4 text-gray-700"></p>
    </section>

    <!-- Step 2: AI Stress Chat + Lyrics -->
    <section class="bg-white p-6 rounded-lg shadow">
      <h2 class="text-xl font-bold mb-4 text-gray-800">Talk to AI Coach</h2>
      <div class="flex flex-col space-y-3">
        <textarea id="ai-input" rows="3" placeholder="Describe your stress or problem..."
          class="w-full p-3 border border-gray-300 rounded-lg focus:ring-indigo-500 focus:border-indigo-500 transition"></textarea>
        <button id="ai-submit" class="px-6 py-2 bg-indigo-600 text-white rounded hover:bg-indigo-700 w-max">Send to AI</button>
      </div>
      <div id="ai-response" class="mt-4 p-4 bg-gray-50 border border-gray-200 rounded-lg min-h-[80px]">
        <p class="text-gray-500">AI will respond here with a calming or motivational lyric + BGM suggestion.</p>
      </div>
    </section>

    <!-- Step 3: Reflection Calendar -->
    <section class="bg-white p-6 rounded-lg shadow">
      <h2 class="text-xl font-bold mb-4 text-gray-800">Reflection Calendar</h2>
      <div id="calendar" class="grid grid-cols-7 gap-2 text-center text-sm"></div>
      <div id="note-display" class="mt-4 p-4 bg-gray-50 border border-gray-200 rounded-lg min-h-[60px]">
        <p class="text-gray-500">Select a date to see your reflection note.</p>
      </div>
    </section>

  </main>

  <script>
    const calmBtns = document.querySelectorAll(".calm-btn");
    const calmOutput = document.getElementById("calm-output");
    calmBtns.forEach(btn => {
      btn.addEventListener("click", () => {
        const type = btn.dataset.type;
        const messages = {
          breathing: "Take a deep breath in... hold... and exhale slowly. Repeat 5 times.",
          meditation: "Find a quiet place, close your eyes, and focus on your breath for 3 minutes.",
          stretching: "Stretch your arms, neck, and back gently for 2-3 minutes.",
          journaling: "Write down your thoughts and feelings for a few minutes. Let it flow.",
          mindfulness: "Observe your surroundings and your feelings without judgment for 2 minutes."
        };
        calmOutput.textContent = messages[type] || "";
      });
    });

    const aiSubmit = document.getElementById("ai-submit");
    const aiInput = document.getElementById("ai-input");
    const aiResponse = document.getElementById("ai-response");

    aiSubmit.addEventListener("click", async () => {
      const text = aiInput.value.trim();
      if (!text) return alert("Please describe your stress or problem.");

      // For now, simulate AI response (later connect to backend)
      const responses = [
        "Here's a short 30-sec motivational lyric: ðŸŽµ 'Breathe in calm, let go of the storm, rise again, keep yourself warm' ðŸŽµ",
        "A calming melody suggestion: Soft piano or nature sounds.",
        "Sometimes funny: ðŸŽµ 'Stress be gone, dance along, laugh out loud, life is strong!' ðŸŽµ"
      ];
      const rand = responses[Math.floor(Math.random() * responses.length)];
      aiResponse.innerHTML = `<p>${rand}</p>`;

      // Save to localStorage as a note
      const today = new Date().toISOString().split('T')[0];
      const reflections = JSON.parse(localStorage.getItem("reflections") || "{}");
      reflections[today] = text + " â†’ AI: " + rand;
      localStorage.setItem("reflections", JSON.stringify(reflections));

      aiInput.value = "";
      renderCalendar();
    });

    const calendarEl = document.getElementById("calendar");
    const noteDisplay = document.getElementById("note-display");

    function renderCalendar() {
      calendarEl.innerHTML = "";
      const reflections = JSON.parse(localStorage.getItem("reflections") || "{}");
      const dates = Object.keys(reflections).sort();
      dates.forEach(date => {
        const dayEl = document.createElement("div");
        dayEl.textContent = date.split('-')[2]; // show day only
        dayEl.className = "calendar-day p-2 rounded hover:bg-indigo-100 bg-indigo-50";
        dayEl.addEventListener("click", () => {
          noteDisplay.textContent = reflections[date];
        });
        calendarEl.appendChild(dayEl);
      });
    }

    renderCalendar();

    document.getElementById("logout-btn").addEventListener("click", () => {
      localStorage.removeItem("currentUser");
      window.location.href = "login.html";
    });
  </script>

</body>
</html>
